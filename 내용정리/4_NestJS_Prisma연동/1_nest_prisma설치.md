# 🔔 DB 사용하기

- 지금까지는 DB 를 사용하지 않고 프로그램이 실행될 때 변수에 값을 저장하는 식으로 진행을 했습니다. 하지만 이는 프로그램의 작동이 멈췄을 때 모든 데이터가 삭제되기 때문에 사용하면 안되는 방식입니다. 그래서 DB 에 데이터를 저장할 것입니다.

- 우선은 DB 와 연동을 해야 합니다. 그런데 아래와 같은 것들을 정해야 합니다.

    1. 어떤 종류의 DB 를 사용할 것인가요? 예시: mysql, postgresql 등등
        - 보통은 mysql 을 많이 사용합니다.

    2. 어떤 ORM 을 사용할 것인가요? 예시: typeORM, prisma 등등
        - orm 은 DB 에 있는 정보를 javascript 객체로 관리할 수 있게 해주는 매니저라고 생각하면 됩니다. DB 에 접근할 수 있는 API 들을 제공하기 때문에 sql query 를 일일이 작성하지 않고도 메소드를 사용하여 아주 쉽게 데이터를 가져올 수 있습니다. <br/><br/><br/>

- DB 는 mysql 을 사용할 것이며 ORM 은 prisma 를 사용하도록 하겠습니다.

- mysql 이 설치가 되어있다는 가정하에 prisma 를 설치하도록 하겠습니다.
    
    1. 자신이 생성한 nest 프로젝트에서 다음의 명령어를 입력합니다.
        ```
            npm i @prisma/client prisma
        ``` 
        ```
            npx prisma init
        ```
        <br/><br/><br/>

- 위의 과정을 거쳤다면 nest 프로젝트 디렉토리에 prisma 라는 폴더가 생겼을 것이고 .env 파일도 생성이 되었을 것입니다. 아래와 같이 .env 파일을 수정해줍니다.
    ```
        DATABASE_URL="mysql://root:1234@localhost:3306/myDB"
    ```
    - `mysql`: mysql DB 를 사용한다는 뜻입니다.
    - `root`: DB 사용자 이름입니다. 본인의 DB 에 생성되어있는 계정에 맞추어 작성해줍니다.
    - `1234`: DB 사용자의 비밀번호입니다. 마찬가지로 계정 비밀번호에 맞추어 작성해줍니다.
    - `localhost`: 호스트 정보입니다. 만약 다른 서버에 DB 가 존재한다면 해당 서버의 호스트 주소를 입력해주면 됩니다.
    - `3306`: 포트 번호입니다. mysql 의 경우 보통 3306 포트를 사용합니다. mysql 을 설치할 때 설정해두었던 포트번호를 입력해줍니다.
    - `myDB`: 사용할 DB 이름입니다. 주의할 점은 해당 이름을 가지는 DB 가 이미 생성이 되어있어야 합니다. 생성 방법은 mysql cli 에서 `create database myDB` 와 같은 식으로 입력하거나 mysql workbench 에서 생성해주면 됩니다. 